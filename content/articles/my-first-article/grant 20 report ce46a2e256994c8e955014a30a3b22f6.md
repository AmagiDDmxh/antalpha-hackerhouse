# grant 20 report

Created: November 21, 2022 3:06 PM
Last Edited Time: November 27, 2022 2:05 PM
tag: grant, 外部, 已发布

Overview

Phase 1 of the Optimism-Uniswap Liquidity Mining Program starts on October 26th and lasts for two weeks. 50K OPs are deployed in Arrakis Finance, xToken, and Gamma strategies (start date November 1st). The incentive pool are:

- WETH/USDC - 0.05%
- WETH/DAI - 0.3%
- USDC/DAI - 0.01%

This article analyzes the impact of the Liquidity Mining Program Phrase 1 from the perspective of the trading pool itself, the market, and the three community projects. We also present recommendations for the following two phrases through solid data analysis and our community experience to create more value for the Uniswap protocol.

# Methodology

## Data Source

We use tick data to analyze the impact of liquidity mining programs on incentive pools. Our tick data and 1-min resample comes from Alchemy‘s rpc. We download event raw data and clean it by our py scripts. you can found it in [https://github.com/zelos-alpha/research](https://github.com/zelos-alpha/research).

Some key steps are as follows

tick data:

1. mint/burn/collect/swap event log from following pools
    1. 0x85149247691df622eaf1a8bd0cafd40bc45154a9
    2. 0x03af20bdaaffb4cc0a521796a223f7d85e2aac31
    3. 0xbf16ef186e715668aa29cef57e2fd7f9d48adfe6
2. decode raw data into tick data, recalculate it’s swap price, lower/upper price, etc.
3. resample tick data as one sample market data for fund backtest
4. filter event from raw data by “receipt&owner” in event log. to distinguish fond’s corresponding behaviors.
5. we also download  “internal txs” of xToken fund addresses from op scan to simplify data cleaning process.

| fund | fund address  |
| --- | --- |
| gamma-usdc-weth-0.05 | 0xed17209ab7f9224e29cc9894fa14a011f37b6115 |
| xToken-usdc-weth-0.05 | 0xc5F0237A2a2bb9dc60dA73491aD39A1afC4c8B63 |
| akk-gamma-usdc-weth-0.05 | 0x38b26d26e575b70ae37f7390a22711500773a00e |
| gamma-WETH/DAI - 0.3% | 0x14e42871d90282ec0439f01347178d6331fc1873 |
| xToken-WETH/DAI - 0.3% | 0x7fc70ABE76605d1Ef1f7A5DdC5E2ad35A43a6949 |
| arrakis-WETH/DAI - 0.3% | 0x96FecBDc4ff071779cd82DA7bA23DA76B0E37aCB |
| gamma-USDC/DAI - 0.01% | 0xaed05fdd471a4eecee48b34d38c59cc76681a6c8 |
| xToken-USDC/DAI - 0.01% | 0x3f96C580436dD59404Ba612bf6D8079Dc10f6f7E |
| arrakis-USDC/DAI - 0.01% | 0x632336474f5Bf11aEbECd63B84A0a2800B99a490 |

Also, to analyze the impact of Phrase 1 on the market and the partner, we use Dune Analysis and Defillama data to observe the overall trend. The data starts on 2022/10/10, two weeks before the start of LM.

## Rolling TVL

For Mint and Burn events, we calculate the value of the input asset using the price at event block time. The WETH/USDC and USDC/DAI pools are denominated in USDC. WETH/DAI is denominated in DAI. Each hour, the difference between the value of all the Mint assets and the value of the burned assets is calculated as the TVL change. The change in TVL over the last 24-hour time window is the Rolling TVL.

## Slippage

We define realized slippage as the absolute value of the price change percentage after each SWAP. Every hour, we calculate the volume-weighted average slippage.

## Demeter‘s fund Backtest Strategy Returns

We captured the Gamma, xToken, and Arrakis information in the WETH/USDC incentive pool from Tick data. We regard the three projects as active funds and their operations in the pool as trading strategies. Use Demeter to calculate the three projects The minute-level rate of return and the size of the hourly liquidity.

Demeter is a powerful and accurate back-tested tool developed by our group. We rewrite a little bit to support backtesting a fund. Demeter replays the fund’s actions in the market situation every minute to generate its performance. With this tool, we can analyze Gamma/xToken/Arrakis performance in depth.

Assumption that Demeter use：

1. no fund management fee, in fact, gamma charges 10% of fee incomes 
2. OP price change. we set as $0.9 to simplify calculation.
3. ‘Total liquidity‘ holds same during one minutes.
4. OP token incentive is paid in every minutes.**0.27555555555 OP/min**
5. net value of fund is defined as all open position value. OP token is not included.

# Analysis

## Incentive Pools

By aggregating the Tick-level data, we get the hourly market performance. Then we show the performance of pools over a 24-hour time window. The gray vertical lines in the graph mark several critical times: Arrakis and xToken LM start and end times and Gamma LM start time.

### Mint and burn behavior observations

![Untitled](grant%2020%20report%20ce46a2e256994c8e955014a30a3b22f6/Untitled.png)

![Untitled](grant%2020%20report%20ce46a2e256994c8e955014a30a3b22f6/Untitled%201.png)

![Untitled](grant%2020%20report%20ce46a2e256994c8e955014a30a3b22f6/Untitled%202.png)

All three pools have a short Mint event spike after the LM ends. We speculate that this is due to users removing funds in the projects and reinvesting them in the Uniswap pool.

### Swap behavior observations

![Untitled](grant%2020%20report%20ce46a2e256994c8e955014a30a3b22f6/Untitled%203.png)

![Untitled](grant%2020%20report%20ce46a2e256994c8e955014a30a3b22f6/Untitled%204.png)

![Untitled](grant%2020%20report%20ce46a2e256994c8e955014a30a3b22f6/Untitled%205.png)

All three incentive pools experienced an increase in trading volume after the LM was opened. We speculate that the high point of SWAP volume right after the end of LM is due to the need for rebalancing after users withdraw their liquidity positions.

### **Slippage and TVL variation**

![Untitled](grant%2020%20report%20ce46a2e256994c8e955014a30a3b22f6/Untitled%206.png)

![Untitled](grant%2020%20report%20ce46a2e256994c8e955014a30a3b22f6/Untitled%207.png)

![Untitled](grant%2020%20report%20ce46a2e256994c8e955014a30a3b22f6/Untitled%208.png)

After November 6th, the TVL of the three pools all dropped sharply, and funds were withdrawn on a large scale. This was due to the ferment of the FTX incident. We speculate that most Optimism Uniswap pool LP participants are professional investors, and the assets they invested may be a loan, so when there is a problem with FTX, they need to withdraw funds and return to liquidation.

The impact of the FTX event is enormous. Therefore, when comparing the slippage, we only focus on the data before 11.6. In the USDC/DAI trading pool, the slippage weakened by LM is the most significant. Next, we use the data before November 6 to draw a volume and slippage scatter plot.

![Untitled](grant%2020%20report%20ce46a2e256994c8e955014a30a3b22f6/Untitled%209.png)

![Untitled](grant%2020%20report%20ce46a2e256994c8e955014a30a3b22f6/Untitled%2010.png)

![Untitled](grant%2020%20report%20ce46a2e256994c8e955014a30a3b22f6/Untitled%2011.png)

The slippage in LM in USDC/DAI and WETH/DAI pools has decreased compared with before LM. The change is more noticeable when the transaction volume is large. The change in WETH/USDC pool is not apparent.

## Market

### Uniswap pools of the same token pairs on different chains

![Untitled](grant%2020%20report%20ce46a2e256994c8e955014a30a3b22f6/Untitled%2012.png)

![Untitled](grant%2020%20report%20ce46a2e256994c8e955014a30a3b22f6/Untitled%2013.png)

![Untitled](grant%2020%20report%20ce46a2e256994c8e955014a30a3b22f6/Untitled%2014.png)

Looking at the relevant pools of both Ethereum and Polygon chains, Op LM does not significantly impact the pools. The LP migration of other chain-related liquidity pools is not significant.

On Optimism, the WETH/DAI 0.05% pool and the WETH/USDC 0.03 pool fall at the beginning of the LM. Then pools maintain lower liquidity before rising back up at the end of the LM. Migration between different Uniswap pools on the same chain is more significant.

### Optimism bridge

![Untitled](grant%2020%20report%20ce46a2e256994c8e955014a30a3b22f6/Untitled%2015.png)

![Untitled](grant%2020%20report%20ce46a2e256994c8e955014a30a3b22f6/Untitled%2016.png)

There was a significant increase in the number of users interacting with Optimism two days before LM started. There was also a significant increase in WETH, USDC, and DAI.

### Observation in Op DEX TVL

![dex_tvl_all.png](grant%2020%20report%20ce46a2e256994c8e955014a30a3b22f6/dex_tvl_all.png)

After 10.26, the TVL of the large Dex on Op all increased. The TVL of ZipSwap dropped after 10.26, then gradually rebounded after 11.9. We speculate that ZipSwap’s liquidity provider may have shifted and participated in Uniswap’s LM. Zipswap is also one of the projects in OP GovFund cycle 1 and has not yet started.

## Partner

### Tokens values in projects

![Gamma.png](grant%2020%20report%20ce46a2e256994c8e955014a30a3b22f6/Gamma.png)

![Arrakis Finance.png](grant%2020%20report%20ce46a2e256994c8e955014a30a3b22f6/Arrakis_Finance.png)

We plotted the token values of Gamma and Arrakis using Defillama’s data. wETH, USDC, and DAI have increased in value compared to the other tokens at the start of the LM. It can be seen that Uniswap LM has helped projects gain more exposure and participation.

### Projects’ strategy returns on WETH/USDC 0.05%.

![Untitled](grant%2020%20report%20ce46a2e256994c8e955014a30a3b22f6/Untitled%2017.png)

![Untitled](grant%2020%20report%20ce46a2e256994c8e955014a30a3b22f6/Untitled%2018.png)

![Untitled](grant%2020%20report%20ce46a2e256994c8e955014a30a3b22f6/Untitled%2019.png)

From large to small, the liquidity providers are Arrakis Finance, xToken, and Gamma Strategy. The Op incentives assigned to each project per minute are fixed. Therefore, the higher the project's liquidity, the fewer op incentives users get per liquidity. From the perspective of strategy performance, xToken performed better than Arrakis. Because Gamma also charges management fees, the actual returns of users will be less.

# Closing Thoughts

## Finding & Interpretation

Impact on liquidity pool:

- WETH/DAI 0.30, DAI/USDC 0.01 The liquidity of the two pools has increased due to LM. The liquidity of the WETH/USDC 0.05 pool has not increased significantly. The TVL of the WETH/DAI 0.30 pool has increased after LM. Fund utilization has improved. On the whole, the capital efficiency of the three pools has improved.
- LM has made the transactions of the three pools active. The volume and quantity of SWAP have increased significantly. LM also reduces the transaction slippage, but this effect is insignificant in the WETH/USDC 0.05 pool.

Impact on market:

- Many LM-related tokens flowed into Optimism before the start of LM. The number of users interacting with the cross-chain bridge increased significantly before LM started. The liquidity of Uniswap on other chains has not been significantly reduced because of Op’s LM. Users from other chains may not necessarily migrate to new ones. They may borrow more tokens to earn LM incentives.
- The liquidity pattern of Optimism Uniswap LM-related pools shows that there may be liquidity migration between different fee pools.

Impact on partners:

- LM has increased the amount of tokens related to the three projects. And the value after the end of LM is higher than before the start.
- There is reward distortion. Projects with better yields have more liquidity to participate in. Since the incentives allocated to each project are the same, users in projects with better yields receive fewer incentives.

## For future Optimism-Uniswap Liquidity Mining Program

- We propose to allocate Op incentives based on the amount of liquidity contributed by the project. It is an unreasonable design for three projects to share liquidity rewards equally. Subsidies can distort the transmission of market signals. In the absence of op rewards, users will choose funds to participate in based on the performance of the funds. Funds with poor performance have fewer users. However, during the subsidy cycle, funds with fewer participating funds will have a higher reward return rate, and fewer funds will be used to share the OP rewards belonging to this fund. As the activity progresses, more subsequent LPs will shrewdly switch liquidity from the three to obtain a greater return on op token rewards. This is not in line with our original intention of rewarding.
- From the perspective of slippage, the impact of Phrase1 LM in the WETH/USDC 0.3 pool is not apparent. The following phrase can consider increasing the incentive allocation in the pool to achieve better results.

# References

Dune dashboard: [https://dune.com/xiz/oplm](https://dune.com/xiz/oplm)

Defillama: [https://defillama.com/chain/Optimism](https://defillama.com/chain/Optimism)